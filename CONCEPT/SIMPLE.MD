The full simulation is a significant commitment.

A simpler simulation could work as follows:

People who work, generate an income of 10 dollars

They have the following training opportunities which they must do in the specified order:

15 days for 10% more productivity
20 days for 15% more productivity
30 days for 25% more productivity
25 days for 20% more productivity
10 days for 10% more productivity
10 days for 10% more productivity
10 days for 10% more productivity

We assume that they must spend at least 8 dollars per day for their minimum standard of living.
This means in the beginning, with no productivity enhancement, there will only be 2 dollars available to save.
It takes 4 days to save 8 dollars at a 20% savings rate.
However, discretionary income may be allocated toward additional consumption,
assuming 1 dollar brings 1 utility.

Saving vs consumption is dictated by a time preference parameter, which is not
supposed to actually reflect time preference but rather, it is just a
mechanical number that differentiates saving and spending behavior
and should not be seen as some sort of reward/punishment for patience or impatience.

There can be n people.

According to the loanable funds model,
there is a daily loanable funds market,
where the saved money has to be borrowed
on the same day it was saved.
The market interest rate adjusts so that investment and savings are equalized.

Assuming n = 10

Day #1

There is a total income of 100 dollars.

20 can be saved or consumed.

The loanable funds therefore are 20 dollars.

There are some people who want to train for more productivity.

15 days for 10% more productivity
This requires a total of 120 dollars to fund the whole 15 days
and 8 dollars of loanable funds per day.

This is enough for 2 people training.

The lenders must commit themselves to the full 16 dollars of savings for 15 days.
But it also means that 4 dollars are left over.
The borrowers cannot qualify as lenders.
This means that there will only be 8 lenders in the loanable funds market.
The loanable funds shrink to 16 dollars.
No loanable funds are left over.
This means the optimal interest rate should be 0%.

The question then is, what are the interest expectations of the lenders so that they become willing to lend their full discretionary income?

According to time preference theory. Someone with a 3% time preference will increase his
savings until his consumption is 30% of his savings.
They will only save if the return is equal or exceeds time preference.

As everyone starts off with 0 savings before the day starts,
they decide to consume 30% of 0 or 0 of their savings.

new savings = (1-time preference)*old savings + income - minimum living expenses + interest income - interest expense

But they also obligated themselves to provide 2 dollars of savings for 15 days.
This means they will accumulate savings until they have 30 dollars of savings.

Offtopic: A daily loanable funds market appears to be quite a ridiculous concept, doesn't it?
But if a daily loanable funds market is the wrong duration,
can the problem be solved by lengthening the duration?
Maybe, a longer duration would require a larger money supply.
As the duration approaches infinity, the necessary money supply would approach infinity,
as all money is spent once and then saved and never spent again.
In other words, playing around with the duration won't solve the fundamental problem.
When economists talk about something only being possible in the short run, they essentially mean
the gap between the opening and closing of the hypothetical loanable funds market.

10% productivity means that 10 dollars of income turn into 11 dollars of income and 3 dollars of savings
and it will take 40 days to pay the principal debt off,
but at an interest rate of 30% it will cost 9 cent per day in interest during the first day.
It will be rational to pay off the debt with the entirety of the discretionary income.

As two people have borrowed money and are paying off debt, there are 6 dollars of payments per day.
This means that if one person saves 2 dollars per day, the third borrower can train and increase his income.
The question then becomes, should person #1 and #2 borrow even more to increase their income,
or should they pay off their debt early so someone else can borrow and train?
The training efficiency grows with each training session and the last three training sessions
have the highest yield. So an optimal allocation of debt would imply that
the first student should train for the full duration of 120 days and then immediately earn 20 dollars per day,
which lets him pay off his debt in 80 days vs the 40 days it takes to pay off his first loan.

The essence of this simulation boils down to deciding how much discretionary income to allocate towards
consumption, saving or paying off debt, calculating the resulting market interest rates
and determining the order of investment.

